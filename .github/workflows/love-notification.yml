# .github/workflows/love-days-reminder.yml
name: ğŸ’Œ ä¹”&å¨œæ‹çˆ±å¤©æ•°æé†’

on:
  schedule:
    # æ¯å¤© UTC æ—¶é—´ 2:00 è¿è¡Œï¼ˆåŒ—äº¬æ—¶é—´ 10:00ï¼‰
    - cron: '0 2 * * *'
  workflow_dispatch: # å…è®¸æ‰‹åŠ¨è§¦å‘

jobs:
  send-love-reminder:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ›ï¸ æ£€å‡ºä»£ç 
        uses: actions/checkout@v4

      - name: â” è®¾ç½® Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'

      - name: ğŸ“¦ å®‰è£…ä¾èµ–
        run: npm install axios

      - name: ğŸ’– å‘é€æ‹çˆ±å¤©æ•°æé†’
        env:
          BARK_KEY: ${{ secrets.BARK_KEY }}
        run: node .github/scripts/love-days-counter.js

      - name: âœ… ä»»åŠ¡å®Œæˆ
        run: |
          echo "æ‹çˆ±å¤©æ•°æ¨é€ä»»åŠ¡å®Œæˆ"
          echo "å®Œæˆæ—¶é—´: $(date)"
