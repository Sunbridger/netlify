# .github/workflows/scheduled-task.yml
name: Scheduled Netlify Task

on:
  # å®šæ—¶è§¦å‘ï¼ˆUTCæ—¶é—´ï¼‰
  schedule:
    # - cron: '0 9 * * *' # æ¯å¤©UTCæ—¶é—´9ç‚¹è¿è¡Œï¼ˆåŒ—äº¬æ—¶é—´17ç‚¹ï¼‰
    - cron: '*/1 * * * *'  # æ¯1åˆ†é’Ÿè¿è¡Œï¼ˆæµ‹è¯•ç”¨ï¼‰

  # å…è®¸æ‰‹åŠ¨è§¦å‘
  workflow_dispatch:

jobs:
  call-netlify-function:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ• è§¦å‘ Netlify å®šæ—¶ä»»åŠ¡
        run: |
          # æ›¿æ¢ä¸ºä½ çš„ Netlify ç«™ç‚¹URL
          curl -X POST "https://sunbridger.netlify.app/.netlify/functions/scheduled-task" \
            -H "Content-Type: application/json" \
            -w "\nçŠ¶æ€ç : %{http_code}"

      - name: âœ… ä»»åŠ¡å®Œæˆ
        run: echo "å®šæ—¶ä»»åŠ¡æ‰§è¡Œå®Œæˆ - $(date)"
